<!DOCTYPE html>
<html>

<body>

  <section data-bs-version="5.1" class="menu menu5 cid-udIl27BACG" once="menu" id="menu05-0">
    <div class="search-bar" style="margin-top: 100px; text-align: center;">
      <input type="text" [(ngModel)]="searchQuery" placeholder="Search..." />
      <button (click)="search()" class="btn btn-primary">Search</button>
    </div>
    
    <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
      <div class="container">
        <div class="navbar-brand">
          <span class="navbar-logo">
            <a>
              <img src="assets/images/mbr.png" alt="Mobirise Website Builder" style="height: 4.3rem;">
            </a>
          </span>
          <span class="navbar-caption-wrap"><a class="navbar-caption text-black display-4">Library</a></span>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbarSupportedContent" data-bs-target="#navbarSupportedContent" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </div>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true">
        
            <li class="nav-item" *ngIf="view != 'books'">
              <button class="nav-link link text-black display-4" (click)="setView('books')">Books</button>
            </li>
            <li class="nav-item" *ngIf="view == 'books'">
              <button class="nav-link link text-grey display-4">Books</button>
            </li>
            <li class="nav-item" *ngIf="view != 'authors'">
              <button class="nav-link link text-black display-4" (click)="setView('authors')">Authors</button>
            </li>
            <li class="nav-item" *ngIf="view == 'authors'">
              <button class="nav-link link text-grey display-4">Authors</button>
            </li>
            <li class="nav-item" *ngIf="view != 'members'">
              <button class="nav-link link text-black display-4" (click)="setView('members')">Members</button>
            </li>
            <li class="nav-item" *ngIf="view == 'members'">
              <button class="nav-link link text-grey display-4">Members</button>
            </li>
            <li class="nav-item" *ngIf="view != 'loans'">
              <button class="nav-link link text-black display-4" (click)="setView('loans')">Loans</button>
            </li>
            <li class="nav-item" *ngIf="view == 'loans'">
              <button class="nav-link link text-grey display-4">Loans</button>
            </li>
            <li class="nav-item">
              <button class="nav-link link text-black display-4" (click)="showAdd = true">Add An Item</button>
            </li>
            <li class="nav-item">
              <button class="nav-link link text-black display-4" (click)="setView('search')">Search</button>
            </li>
          </ul>

        </div>
      </div>
    </nav>
  </section>

  <section data-bs-version="5.1" class="features4 start cid-udIl9DZwsz" id="features04-1">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 content-head">
          <div class="mbr-section-head mb-5">
            <h4 class="mbr-section-title mbr-fonts-style align-center mb-0 display-2">
              <strong><br /></strong><br /><strong>Library Items</strong><br /><strong><br /></strong>
              <br /><hr />
            </h4>
            <div *ngIf="showEdit" id="editForm" class="mbr-section-title mbr-fonts-style align-center mb-0 display-7">
              <form (ngSubmit)="submitEditForm()">
                <!-- Edit form for Books -->
                <div *ngIf="view === 'books'">
                  <input type="text" [(ngModel)]="editedItem.title" name="title" placeholder="Title"><br>
                  <input type="text" [(ngModel)]="editedItem.author" name="author" placeholder="Author"><br>
                  <input type="text" [(ngModel)]="editedItem.isbn" name="isbn" placeholder="ISBN"><br>
                  <input type="text" [(ngModel)]="editedItem.photo" name="photo" placeholder="Photo URL"><br>
                </div>
  
                <!-- Edit form for Authors -->
                <div *ngIf="view === 'authors'">
                  <input type="text" [(ngModel)]="editedItem.name" name="name" placeholder="Name"><br>
                  <input type="text" [(ngModel)]="editedItem.bio" name="bio" placeholder="Bio"><br>
                  <input type="date" [(ngModel)]="editedItem.birthDate" name="birthDate" placeholder="Birth Date"><br>
                  <input type="text" [(ngModel)]="editedItem.photo" name="photo" placeholder="Photo URL"><br>
                </div>
  
                <!-- Edit form for Members -->
                <div *ngIf="view === 'members'">
                  <input type="text" [(ngModel)]="editedItem.name" name="name" placeholder="Name"><br>
                  <input type="text" [(ngModel)]="editedItem.membershipNumber" name="membershipNumber" placeholder="Membership Number"><br>
                  <input type="text" [(ngModel)]="editedItem.email" name="email" placeholder="Email"><br>
                  <input type="text" [(ngModel)]="editedItem.address" name="address" placeholder="Address"><br>
                  <input type="date" [(ngModel)]="editedItem.joinedDate" name="joinedDate" placeholder="Joined Date"><br>
                  <input type="text" [(ngModel)]="editedItem.photo" name="photo" placeholder="Photo URL"><br>
                </div>
  
                <!-- Edit form for Loans -->
                <div *ngIf="view === 'loans'">
                  <select [(ngModel)]="editedItem.book" name="book">
                    <option *ngFor="let book of books" [value]="book._id">{{ book.title }}</option>
                  </select><br>
                  <select [(ngModel)]="editedItem.member" name="member">
                    <option *ngFor="let member of members" [value]="member._id">{{ member.name }}</option>
                  </select><br>
                  <input type="date" [(ngModel)]="editedItem.loanDate" name="loanDate" placeholder="Loan Date"><br>
                  <input type="date" [(ngModel)]="editedItem.returnDate" name="returnDate" placeholder="Return Date"><br>
                </div>
  
                <button type="submit" class="btn item-btn btn-primary display-7">Submit</button>
                <button (click)="cancelEditForm()" class="btn item-btn btn-secondary display-7">Cancel</button>
              </form>
            </div>
  
            <div *ngIf="showDeleteConfirmation" id="deleteConfirmation" class="mbr-section-title mbr-fonts-style align-center mb-0 display-7">
              <p>Are you sure you want to delete?</p>
              <button (click)="confirmDelete()" class="btn item-btn btn-secondary display-7">Yes</button>
              <button (click)="cancelDelete()" class="btn item-btn btn-primary display-7">No</button>
            </div>
  
            <div *ngIf="showAdd" id="addForm" class="mbr-section-title mbr-fonts-style align-center mb-0 display-7">
              <form (ngSubmit)="submitAddForm()">
                <label>Type:</label>
                <select name="type" [(ngModel)]="addedItem.view">
                  <option value="books">Book</option>
                  <option value="authors">Author</option>
                  <option value="members">Member</option>
                  <option value="loans">Loan</option>
                </select> <br>
                <div *ngIf="addedItem.view === 'books'">
                  <input type="text" [(ngModel)]="addedItem.title" name="title" placeholder="Title"><br>
                  <input type="text" [(ngModel)]="addedItem.author" name="author" placeholder="Author"><br>
                  <input type="text" [(ngModel)]="addedItem.publishedYear" name="publishedYear" placeholder="Published Year"><br>
                  <input type="text" [(ngModel)]="addedItem.genre" name="genre" placeholder="Genre"><br>
                  <input type="text" [(ngModel)]="addedItem.photo" name="photo" placeholder="Photo URL"><br>
                </div>
                <div *ngIf="addedItem.view === 'authors'">
                  <input type="text" [(ngModel)]="addedItem.name" name="name" placeholder="Name"><br>
                  <input type="text" [(ngModel)]="addedItem.bio" name="bio" placeholder="Bio"><br>
                  <input type="date" [(ngModel)]="addedItem.birthDate" name="birthDate" placeholder="Birth Date"><br>
                  <input type="text" [(ngModel)]="addedItem.photo" name="photo" placeholder="Photo URL"><br>
                </div>
                <div *ngIf="addedItem.view === 'members'">
                  <input type="text" [(ngModel)]="addedItem.name" name="name" placeholder="Name"><br>
                  <input type="text" [(ngModel)]="addedItem.membershipNumber" name="membershipNumber" placeholder="Membership Number"><br>
                  <input type="text" [(ngModel)]="addedItem.email" name="email" placeholder="Email"><br>
                  <input type="text" [(ngModel)]="addedItem.address" name="address" placeholder="Address"><br>
                  <input type="date" [(ngModel)]="addedItem.joinedDate" name="joinedDate" placeholder="Joined Date"><br>
                  <input type="text" [(ngModel)]="addedItem.photo" name="photo" placeholder="Photo URL"><br>
                </div>
                <div *ngIf="addedItem.view === 'loans'">
                  <select [(ngModel)]="addedItem.book" name="book">
                    <option *ngFor="let book of books" [value]="book._id">{{ book.title }}</option>
                  </select><br>
                  <select [(ngModel)]="addedItem.member" name="member">
                    <option *ngFor="let member of members" [value]="member._id">{{ member.name }}</option>
                  </select><br>
                  <input type="date" [(ngModel)]="addedItem.loanDate" name="loanDate" placeholder="Loan Date"><br>
                  <input type="date" [(ngModel)]="addedItem.returnDate" name="returnDate" placeholder="Return Date"><br>
                </div>
                <button type="submit" class="btn item-btn btn-primary display-7">Submit</button>
                <button (click)="cancelAddForm()" class="btn item-btn btn-secondary display-7">Cancel</button>
              </form>
            </div>
          </div>
        </div>
      </div>
  
      <div class="row" *ngIf="view === 'books'">
        <div class="item features-image col-12 col-md-6 col-lg-4" *ngFor="let book of books">
          <div class="item-wrapper">
            <div class="item-img">
              <img [src]="book.photo" alt="{{book.title}}"> <!-- Use [src] to bind the image URL -->
            </div>
            <div class="item-content">
              <h5 class="item-title mbr-fonts-style display-5">
                <strong>{{book.title}}</strong>
              </h5>
              <ul>
                <li class="item-text mbr-fonts-style display-7">Title: {{book.title}}</li>
                <li class="item-text mbr-fonts-style display-7">Author: {{book.author}}</li>
                <li class="item-text mbr-fonts-style display-7">ISBN: {{book.isbn}}</li>
              </ul>
              <div class="mbr-section-btn item-footer">
                <a href="#" class="btn item-btn btn-primary display-7" (click)="showEditForm(book._id, 'books')">Edit</a>
                <a href="#" class="btn item-btn btn-secondary display-7" (click)="askDeleteConfirmation(book._id, 'books')">Delete</a>
              </div>
            </div>
          </div>
        </div>
      </div>
  
      <div class="row" *ngIf="view == 'authors'">
        <div class="item features-image col-12 col-md-6 col-lg-4" *ngFor="let author of authors">
          <div class="item-wrapper">
            <div class="item-img">
              <img [src]="author.photo" alt="{{author.name}}"> <!-- Use [src] to bind the image URL -->
            </div>
            <div class="item-content">
              <h5 class="item-title mbr-fonts-style display-5">
                <strong>{{author.name}}</strong>
              </h5>
              <ul>
                <li class="item-text mbr-fonts-style display-7">Name: {{author.name}}</li>
                <li class="item-text mbr-fonts-style display-7">Bio: {{author.bio}}</li>
              </ul>
              <div class="mbr-section-btn item-footer">
                <a href="#" class="btn item-btn btn-primary display-7" (click)="showEditForm(author._id, 'authors')">Edit</a>
                <a href="#" class="btn item-btn btn-secondary display-7" (click)="askDeleteConfirmation(author._id, 'authors')">Delete</a>
              </div>
            </div>
          </div>
        </div>
      </div>
  
      <div class="row" *ngIf="view == 'members'">
        <div class="item features-image col-12 col-md-6 col-lg-4" *ngFor="let member of members">
          <div class="item-wrapper">
            <div class="item-img">
              <img [src]="member.photo" alt="{{member.name}}"> <!-- Use [src] to bind the image URL -->
            </div>
            <div class="item-content">
              <h5 class="item-title mbr-fonts-style display-5">
                <strong>{{member.name}}</strong>
              </h5>
              <ul>
                <li class="item-text mbr-fonts-style display-7">Name: {{member.name}}</li>
                <li class="item-text mbr-fonts-style display-7">Membership Date: {{member.membershipDate}}</li>
              </ul>
              <div class="mbr-section-btn item-footer">
                <a href="#" class="btn item-btn btn-primary display-7" (click)="showEditForm(member._id, 'members')">Edit</a>
                <a href="#" class="btn item-btn btn-secondary display-7" (click)="askDeleteConfirmation(member._id, 'members')">Delete</a>
              </div>
            </div>
          </div>
        </div>
      </div>
  
      <div class="row" *ngIf="view == 'loans'">
        <div class="item features-image col-12 col-md-6 col-lg-4" *ngFor="let loan of loans">
          <div class="item-wrapper">
            <div class="item-img">
              <img [src]="loan.book.photo" alt="{{loan.book.title}}"> <!-- Use [src] to bind the image URL -->
            </div>
            <div class="item-content">
              <h5 class="item-title mbr-fonts-style display-5">
                <strong>{{loan.book.title}}</strong>
              </h5>
              <ul>
                <li class="item-text mbr-fonts-style display-7">Book Title: {{loan.book.title}}</li>
                <li class="item-text mbr-fonts-style display-7">Member: {{loan.member.name}}</li>
                <li class="item-text mbr-fonts-style display-7">Due Date: {{loan.returnDate | date}}</li>
              </ul>
              <div class="mbr-section-btn item-footer">
                <a href="#" class="btn item-btn btn-primary display-7" (click)="showEditForm(loan._id, 'loans')">Edit</a>
                <a href="#" class="btn item-btn btn-secondary display-7" (click)="askDeleteConfirmation(loan._id, 'loans')">Delete</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

</body>
</html>
